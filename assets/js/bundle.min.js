(function(){"use strict";window.$=document.querySelectorAll.bind(document);Node.prototype.on=window.on=function(name,fn){this.addEventListener(name,fn)};NodeList.prototype.__proto__=Array.prototype;NodeList.prototype.on=NodeList.prototype.addEventListener=function(name,fn){this.forEach(function(elem,i){elem.on(name,fn)})};(function(global){"use strict";function dispatchEvent(el,eventName){function _CustomEvent(event,params){params=params||{bubbles:false,cancelable:false,detail:undefined};var evt=document.createEvent("CustomEvent");evt.initCustomEvent(event,params.bubbles,params.cancelable,params.detail);return evt}_CustomEvent.prototype=global.Event.prototype;var event;if(global.CustomEvent){event=new global.CustomEvent(eventName)}else{event=new _CustomEvent(eventName)}event&&el.dispatchEvent(event)}function getFocusableChildren(node){var focusableElements=["a[href]","area[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex^="-"])'];return $$(focusableElements.join(","),node).filter(function(child){return!!(child.offsetWidth||child.offsetHeight||child.getClientRects().length)})}function $$(selector,context){return Array.prototype.slice.call((context||document).querySelectorAll(selector))}function trapTabKey(node,event){var focusableChildren=getFocusableChildren(node);var focusedItemIndex=focusableChildren.indexOf(document.activeElement);if(event.shiftKey&&focusedItemIndex===0){focusableChildren[focusableChildren.length-1].focus();event.preventDefault()}else if(!event.shiftKey&&focusedItemIndex===focusableChildren.length-1){focusableChildren[0].focus();event.preventDefault()}}function setFocusToFirstItem(node){var focusableChildren=getFocusableChildren(node);if(focusableChildren.length)focusableChildren[0].focus()}var focusedBeforeDialog;var A11yDialog=function(node,main){var namespace="data-a11y-dialog";var that=this;main=main||document.querySelector("#main");this.shown=false;this.show=show;this.hide=hide;$$("["+namespace+'-show="'+node.id+'"]').forEach(function(opener){opener.addEventListener("click",show)});$$("["+namespace+"-hide]",node).concat($$("["+namespace+'-hide="'+node.id+'"]')).forEach(function(closer){closer.addEventListener("click",hide)});document.addEventListener("keydown",function(event){if(that.shown&&event.which===27){event.preventDefault();hide()}if(that.shown&&event.which===9){trapTabKey(node,event)}});function maintainFocus(event){if(that.shown&&!node.contains(event.target)){setFocusToFirstItem(node)}}function show(){that.shown=true;node.removeAttribute("aria-hidden");main.setAttribute("aria-hidden","true");focusedBeforeDialog=document.activeElement;setFocusToFirstItem(node);document.body.addEventListener("focus",maintainFocus,true);dispatchEvent(node,"dialog:show")}function hide(){that.shown=false;node.setAttribute("aria-hidden","true");main.removeAttribute("aria-hidden");focusedBeforeDialog&&focusedBeforeDialog.focus();document.body.removeEventListener("focus",maintainFocus,true);dispatchEvent(node,"dialog:hide")}};if(typeof module!=="undefined"&&typeof module.exports!=="undefined"){module.exports=A11yDialog}else if(typeof define==="function"&&define.amd){define("A11yDialog",[],function(){return A11yDialog})}else if(typeof global==="object"){global.A11yDialog=A11yDialog}})(window);var h={evalClientResolution:function evalClientResolution(size){return window.matchMedia("(min-width: "+size+"px)").matches},getDocumentHeight:function getDocumentHeight(){return window.innerHeight||document.clientHeight||document.body.clientHeight},getDocumentScrollTop:function getDocumentScrollTop(){return document.documentElement.scrollTop||document.body.scrollTop},getOffset:function getOffset(elem){var offset=0;do{if(!isNaN(elem.offsetTop))offset+=elem.offsetTop}while(elem=elem.offsetParent);return offset}};(function(){"use strict";var tableOfContents=$(".toc")[0];var footer=$(".footer")[0];var headings=$(".chapter:not(.toc) > h1[id]");var addOffsetView=50;var isLargerThanMobile=h.evalClientResolution(975);var headingsOffset=headings.map(function(heading){return[heading,h.getOffset(heading)]});var evalHeadingsPosition=function(){var scrollTop=h.getDocumentScrollTop()+addOffsetView;if(isLargerThanMobile){for(var i=0,offsets=headingsOffset.length;i<offsets;i++){var headingPassed=scrollTop>=headingsOffset[i][1]&&headingsOffset[i+1]&&scrollTop<headingsOffset[i+1][1];var lastHeading=headingsOffset[i]===headingsOffset[offsets-1]&&scrollTop>=headingsOffset[i][1];if(headingPassed){highlightTableOfContents(headingsOffset[i])}else if(lastHeading){highlightTableOfContents(headingsOffset[offsets-1])}}}};var adjustTableOfContents=function(){var top=h.getOffset(tableOfContents);var bottom=h.getOffset(footer);var current=h.getDocumentScrollTop();var topFn=current>top?"add":"remove";var bottomFn=current+h.getDocumentHeight()>bottom?"add":"remove";tableOfContents.classList[topFn]("sticky");tableOfContents.classList[bottomFn]("sticky-bottom")};var highlightTableOfContents=function(heading){var tocElem=tableOfContents.querySelector('a[href="#'+heading[0].id+'"]');var inViewportElem=tableOfContents.querySelector(".in-viewport");if(!!tocElem&&!tocElem.classList.contains("in-viewport")){inViewportElem&&inViewportElem.classList.remove("in-viewport");tocElem.classList.add("in-viewport")}};document.addEventListener("scroll",adjustTableOfContents,false);window.addEventListener("scroll",evalHeadingsPosition,false);window.addEventListener("resize",h.evalClientResolution.bind(975),false);evalHeadingsPosition();adjustTableOfContents()})();(function(){"use strict";var language=document.documentElement.getAttribute("lang");var languagePicker=$("#language-picker")[0];var editSvg=$('meta[name="svg-pencil-icon"]')[0].getAttribute("content");var linkSvg=$('meta[name="svg-link-icon"]')[0].getAttribute("content");var chapters=$(".chapter:not(.toc)");var syntaxToggle=$('input[name="syntax"]');var idIndex=100;var sanitizeSVG=function(svg){return svg.replace(/title\-\d+/g,"title-"+idIndex++).replace(/desc\-\d+/g,"desc-"+idIndex++)};var getEditLink=function(chapter){var id=chapter.id.split("chapter-")[1];var link=document.createElement("a");link.href="https://github.com/HugoGiraudel/sass-guidelines/blob/gh-pages/"+language+"/_"+id+".md";link.innerHTML=sanitizeSVG(editSvg);link.setAttribute("class","chapter__edit button-ui");link.setAttribute("target","_blank");return link};var getAnchorLink=function(chapter){var heading=chapter.querySelector("h1[id]");var link=document.createElement("a");link.href="#"+heading.id;link.innerHTML=sanitizeSVG(linkSvg);link.setAttribute("class","chapter__link button-ui");return link};var fixSkipLinks=function(){var element=document.getElementById(window.location.hash.substring(1));if(element){if(!/^(?:a|select|input|button|textarea)$/i.test(element.tagName)){element.tabIndex=-1}element.focus()}};var redirectUrl=function(event){window.location.href=this.value};window.on("hashchange",fixSkipLinks,false);languagePicker.on("change",redirectUrl,false);syntaxToggle.on("click",function(event){var fn=this.value==="sass"?"add":"remove";document.body.classList[fn]("sass")});document.addEventListener("DOMContentLoaded",function(event){new A11yDialog(document.getElementById("options-panel"),document.getElementById("main-content"))});chapters.forEach(function(chapter){var wrapper=document.createElement("div");wrapper.setAttribute("class","button-wrapper chapter__buttons");wrapper.appendChild(getAnchorLink(chapter));wrapper.appendChild(getEditLink(chapter));var heading=chapter.querySelector("h1[id]");heading.parentNode.insertBefore(wrapper,heading.nextSibling)})})()})();
